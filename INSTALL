                        Sanewall Installation
                        *********************

These instructions apply to packages downloaded from:
   http://download.sanewall.org/releases

If you have installed sanewall via your distribution, there may be some
differences.

Once you have installed sanewall, read the Getting Started section of
the README.

Installing from the tar-file
============================
Obtain the distribution file. It will look something like:
   sanewall-x.y.z.tar.gz

To install you just need to perform the following steps:
  1. Unpack and change directory:
       tar xvfz sanewall-x.y.z.tar.gz
       cd sanewall-x.y.z

  2. Copy sanewall script to /usr/sbin:
       sudo cp sanewall /usr/sbin

  3. If you are replacing FireHOL you should just be able to create the
     sanewall configuration by copying the FireHOL config:
       sudo cp -rp /etc/firehol /etc/sanewall
       sudo mv /etc/firehol/firehol.conf /etc/sanewall/sanewall.conf

     Otherwise, create a default configuration if this is your first
     installation:
       sudo mkdir /etc/sanewall
       sudo cp examples/client-all.conf /etc/sanewall/sanewall.conf

  4. Run sanewall to generate your new iptables firewall:
       sudo sanewall start

  5. Documentation is under the doc and man directories:
       sudo cp -r man/man* /usr/man
       sudo cp doc /usr/share/doc/sanewall

Note that you will also want to ensure that sanewall runs at boot-time. How
you do so depends on your distribution. The binary can be used directly in
/etc/init.d on many systems. In addition, some example init scripts are
available here:
  http://bugs.sanewall.org/wiki/Init_Scripts


Installing from the rpm-file
============================
This process has been shown to work on Fedora Core 16. Please report any
problems for this or other systems at:
  http://bugs.sanewall.org/sanewall

Obtain the distribution file. It will look something like:
  sanewall-x.y.z-orig.noarch.rpm

To install you just need to perform the following steps:
  1. If you are replacing FireHOL, copy the configuration to a sanewall
     configuration:
       sudo cp -rp /etc/firehol /etc/sanewall
       sudo mv /etc/firehol/firehol.conf /etc/sanewall/sanewall.conf

     Otherwise, the installer will create a default configuration.

  2. If you are replacing FireHOL, you will first need to remove it:
       sudo yum remove firehol

  3. Install the package:
       sudo yum install sanewall-x.y.z-orig.noarch.rpm

  4. Enable the service at boot time and start it immediately:
       sudo systemctl enable sanewall.service
       sudo systemctl start firehol.service

     You can use the "stop" and "status" commands to systemctl to control
     or see the sanewall status.

     Older systems will use the chkconfig system utility to enable/disable
     sanewall.

Sanewall is installed as /usr/sbin/sanewall with an init script also provided
as /etc/init.d/sanewall.


Installing from the deb-file
============================
This process has been shown to work on Ubuntu 12.04. Please report any
problems for this or other systems at:
  http://bugs.sanewall.org/sanewall

Obtain the distribution file. It will look something like:
  sanewall_x.y.z_all.deb

To install you just need to perform the following steps:
  1. Install the package:
       sudo dpkg -i sanewall_x.y.z_all.deb

     If there is an existing FireHOL configuration it will be removed
     and turned into a Sanewall configuration.

     The FireHOL commands will be removed if they are present and
     replaced with the sanewall equivalents.

  2. Sanewall will be set up to start at boot time. To control this
     behaviour use update-rc.d. You also have to enable sanewall in
     /etc/default/sanewall to have sanewall start. To enable it set
     START_SANEWALL to anything other than NO/no.

     You can also put a WAIT_FOR_IFACE entry in this file, which will
     set up the appropriate environment variable whilst running
     sanewall during startup.

Sanewall is installed as /usr/sbin/sanewall with an init script also provided
as /etc/init.d/sanewall.


Building/Installing from Source
===============================
As sanewall is a shell script there is no compilation step as such, however
there is a Makefile which stamps the version into the file, builds the
documentation and creates the final tar-file.

To perform a build you will need the following packages:
   perl
   xmllint
   xsltproc
   docbook-xml
   docbook-xsl
   fop

The Makefile has the following editable variables at the top:
  DB_XSL_BASE   -   path to docbook-xsl stylesheets
  PAPERTYPE     -   paper type for PDF (e.g. A4, letter)

If you do not wish to build the documentation or the non-source tar-file,
you can simply copy the files in much the same manner as described in
"Installing from the tar-file".
